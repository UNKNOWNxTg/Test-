<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Userbot Dashboard — Simple</title>
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#06b6d4;
      --muted:#94a3b8;
      --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;}
    body{
      margin:0;min-height:100vh;background:
      linear-gradient(180deg,#051026 0%, #071027 50%, #07121b 100%);
      color:#e6eef6;display:flex;align-items:center;justify-content:center;padding:28px;
    }
    .wrap{
      width:100%;max-width:920px;
      display:grid;grid-template-columns:1fr 360px;gap:20px;
    }
    .panel{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:14px;padding:20px;box-shadow:0 6px 30px rgba(0,0,0,0.6);
      border:1px solid rgba(255,255,255,0.03);
    }
    header h1{margin:0 0 6px 0;font-size:20px;letter-spacing:0.2px;}
    header p{margin:0;color:var(--muted);font-size:13px;}
    .controls{display:flex;gap:10px;margin-top:16px;}
    button{
      border:0;padding:10px 14px;border-radius:10px;font-weight:600;cursor:pointer;
      background:var(--glass);color:inherit;outline:none;
      transition:transform .12s ease, box-shadow .12s ease;
    }
    button:active{transform:translateY(1px);}
    .btn-start{background:linear-gradient(90deg,#0496b1,#06b6d4);box-shadow:0 6px 18px rgba(6,182,212,0.14);}
    .btn-stop{background:linear-gradient(90deg,#e11d48,#ef4444);box-shadow:0 6px 18px rgba(239,68,68,0.12);}
    .status{
      margin-top:18px;padding:14px;border-radius:10px;background:rgba(255,255,255,0.02);
      display:flex;align-items:center;gap:12px;
    }
    .dot{width:14px;height:14px;border-radius:50%;box-shadow:0 4px 10px rgba(0,0,0,0.5)}
    .dot.online{background:linear-gradient(180deg,#16a34a,#43c26b);box-shadow:0 6px 18px rgba(67,194,107,0.12)}
    .dot.offline{background:linear-gradient(180deg,#6b7280,#374151);opacity:0.6}
    .meta{font-size:13px;color:var(--muted)}
    /* right column */
    .card{
      display:flex;flex-direction:column;gap:12px;height:100%;
    }
    .small{
      font-size:13px;color:var(--muted);
    }
    pre{background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;overflow:auto;font-size:12px;}
    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:12px;}
    @media (max-width:880px){
      .wrap{grid-template-columns:1fr;max-width:720px;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <header>
        <h1>Userbot Dashboard</h1>
        <p>Simple frontend monitor — start/stop are UI-only (replace with API calls to control your server).</p>
      </header>

      <div class="controls">
        <button class="btn-start" id="startBtn">▶ Start</button>
        <button class="btn-stop" id="stopBtn">■ Stop</button>
        <button id="refreshBtn" title="Refresh status">⟳ Refresh</button>
      </div>

      <div class="status" id="statusBox" style="margin-top:18px;">
        <div class="dot offline" id="statusDot"></div>
        <div>
          <div id="statusText" style="font-weight:700">Offline</div>
          <div class="meta" id="statusDetail">Last checked: —</div>
        </div>
      </div>

      <section style="margin-top:18px">
        <h3 style="margin:0;font-size:14px">Console</h3>
        <div class="small" style="margin-top:8px">Local frontend logs (useful for quick debugging)</div>
        <pre id="console" style="height:220px">> Console ready...</pre>
      </section>

      <footer>
        Replace Start/Stop handlers with fetch() calls to your Render/Replit endpoints to control the actual bot.
      </footer>
    </div>

    <div class="panel card">
      <div>
        <h3 style="margin:0 0 6px 0">Quick Info</h3>
        <div class="small">Platform: Render / Replit (change in code)</div>
      </div>

      <div>
        <h3 style="margin:0 0 6px 0">Env variables</h3>
        <pre>API_ID, API_HASH, SESSION</pre>
        <div class="small">Set these securely in Render/Replit env settings — never hardcode in front-end.</div>
      </div>

      <div>
        <h3 style="margin:0 0 6px 0">How to wire</h3>
        <div class="small">
          1. Expose a simple HTTP health endpoint on your server (GET /health).<br>
          2. Update the `HEALTH_URL` in the script below.<br>
          3. Replace start/stop buttons with POST calls to your control endpoints.
        </div>
      </div>

      <div style="margin-top:auto">
        <h3 style="margin:0 0 6px 0">Notes</h3>
        <div class="small">This file is just UI. I can add real fetch examples (with auth) if you want — bolde.</div>
      </div>
    </div>
  </div>

  <script>
    const HEALTH_URL = ""; // optional: put your /health URL here, e.g. "https://my-runner.example.com/health"
    const startBtn = document.getElementById("startBtn");
    const stopBtn = document.getElementById("stopBtn");
    const refreshBtn = document.getElementById("refreshBtn");
    const statusDot = document.getElementById("statusDot");
    const statusText = document.getElementById("statusText");
    const statusDetail = document.getElementById("statusDetail");
    const consoleEl = document.getElementById("console");

    function log(msg){
      const t = new Date().toLocaleString();
      consoleEl.textContent = `> [${t}] ${msg}\n` + consoleEl.textContent;
    }

    function setStatus(online){
      if(online){
        statusDot.classList.remove("offline");
        statusDot.classList.add("online");
        statusText.textContent = "Online";
        statusDetail.textContent = "Last checked: " + new Date().toLocaleString();
        log("Status: ONLINE");
      } else {
        statusDot.classList.remove("online");
        statusDot.classList.add("offline");
        statusText.textContent = "Offline";
        statusDetail.textContent = "Last checked: " + new Date().toLocaleString();
        log("Status: OFFLINE");
      }
    }

    async function checkHealth(){
      if(!HEALTH_URL){
        log("Health URL not configured. Doing local toggle check.");
        // toggle (for demo)
        const now = Date.now();
        setStatus(now % 2 === 0);
        return;
      }
      try{
        const res = await fetch(HEALTH_URL, { method: "GET", mode: "cors" });
        if(res.ok){
          setStatus(true);
        } else {
          setStatus(false);
        }
      }catch(e){
        log("Health check failed: " + e.message);
        setStatus(false);
      }
    }

    startBtn.addEventListener("click", () => {
      log("Start button pressed (UI-only). Replace with API call to start bot.");
      // Example to call start endpoint:
      // fetch("/api/start", { method: "POST", headers:{Authorization:"Bearer ..."} })
      setStatus(true);
    });

    stopBtn.addEventListener("click", () => {
      log("Stop button pressed (UI-only). Replace with API call to stop bot.");
      setStatus(false);
    });

    refreshBtn.addEventListener("click", () => {
      log("Manual refresh requested.");
      checkHealth();
    });

    // initial check
    checkHealth();
    // periodic refresh
    setInterval(checkHealth, 30_000);
  </script>
</body>
</html>
